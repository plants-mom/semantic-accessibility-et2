This repository contains the data and the code for the analysis of the second
eye-tracking experiment (referred to as "experiment 4" in the paper) described
in the paper "Semantic accessibility and interference in pronoun resolution".
See this osf repository for details: https://osf.io/xznw7/
If you just want to examine the results feel free to download doc/models_summary.html.
This file contains all the results. If you want to reproduce the analysis, read on.

There is a default.nix file in the src dir which will make all the relevant
packages available in your shell. You have to have nix installed
(https://nixos.org/download).

The file src/default.nix will also temporarily move your ~/.R/Makevars file and
restore it once you exit the shell. This is because, there were some issues with
the recommended Makevars settings and the brms version used for this project. To
make sure it works as intended, check if the file src/shellExitHook.sh is
executable. If you never set Makevars you can ignore this part.
After you did all that, in the project root run:

nix-shell src/default.nix --pure

(this can take a while on its first run)

To recreate the project run in the nix-shell, in the project root:

Rscript src/01-prepare.R
Rscript src/02-regions.R
Rscript src/03-models.R
Rscript src/04-models_summary.R
Rscript src/combine_data.R
Rscript src/bayes_factor.R
Rscript -e "rmarkdown::render(here::here('doc/models_summary.Rmd'), output_format = 'html_document')"

Note:

- combined data assumes that `subj_cond` can be "MIS" and "MATCH", data from the second experiment assumes that it can be "M" (match) and "MM" (mismatch). This can be quite confusing.
- computation of bayes factor will take a looooong time (for me > 5 days). There is a bug which makes the program crash every ~25 iterations. I was unable to figure out why.
- because of the previous point in the results dir you can also find all the results of the bayes factor computation. Summaries of those are included in the models_summary.html


Contents of the project directory:

.
├── data
│  ├── allACTFiles.txt: data needed for the analysis
│  ├── exp1-region6.csv: region 6 data from the previous experiment
│  ├── exp1-region8.csv: region 8 data from the previous experiment
│  └── README.txt: data readme
├── doc
│  ├── models_summary.html: summary of the models
│  └── models_summary.Rmd: source file for the html summary
├── figs: directory for plots used in the summary and generated by plots.R and models_summary.Rmd
├── models: directory for fitted models
├── README.txt: this readme
├── results: directory for the intermediary results
│  └── bayes_factor.csv: all the bayes factors results
└── src
   ├── 01-prepare.R: preparing data
   ├── 02-regions.R: preparing regions
   ├── 03-models.R: bayesian models
   ├── 04-models_summary.R: summaries of the models
   ├── bayes_factor.R: computation of bayes factors
   ├── combine_data.R: combining data from this and previous exp
   ├── default.nix: nix file with a recipe for the shell (see above)
   ├── descriptive.R: creates latex tables with descriptive summaries used in the paper
   ├── plots.R: plot used in the paper, files starting with 01,02,03 have to be run before
   ├── priors.R: priors for the bayesian models
   └── shellExitHook.sh: exit hook for the nix shell, see above
